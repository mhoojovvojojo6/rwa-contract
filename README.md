# rwa-contract

## 1. 发布合约

```Transaction Digest: GqP5JB3sutDegXbvk6xGBwPNCJtjEjV9uSbWMaffV4Kb
╭──────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Data                                                                                             │
├──────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                                   │
│ Gas Owner: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                                │
│ Gas Budget: 55382400 MIST                                                                                    │
│ Gas Price: 1000 MIST                                                                                         │
│ Gas Payment:                                                                                                 │
│  ┌──                                                                                                         │
│  │ ID: 0x75a6246c1abd51d4f719664deeb534cfafd0a9d5c3ed0be7fba01a3a06ff0627                                    │
│  │ Version: 349179970                                                                                        │
│  │ Digest: 5x6ekDLaK6bT4D3MtWNjPjoMYkWyLh8G2dMQkP1yMucw                                                      │
│  └──                                                                                                         │
│                                                                                                              │
│ Transaction Kind: Programmable                                                                               │
│ ╭──────────────────────────────────────────────────────────────────────────────────────────────────────────╮ │
│ │ Input Objects                                                                                            │ │
│ ├──────────────────────────────────────────────────────────────────────────────────────────────────────────┤ │
│ │ 0   Pure Arg: Type: address, Value: "0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e" │ │
│ ╰──────────────────────────────────────────────────────────────────────────────────────────────────────────╯ │
│ ╭─────────────────────────────────────────────────────────────────────────╮                                  │
│ │ Commands                                                                │                                  │
│ ├─────────────────────────────────────────────────────────────────────────┤                                  │
│ │ 0  Publish:                                                             │                                  │
│ │  ┌                                                                      │                                  │
│ │  │ Dependencies:                                                        │                                  │
│ │  │   0x0000000000000000000000000000000000000000000000000000000000000001 │                                  │
│ │  │   0x0000000000000000000000000000000000000000000000000000000000000002 │                                  │
│ │  └                                                                      │                                  │
│ │                                                                         │                                  │
│ │ 1  TransferObjects:                                                     │                                  │
│ │  ┌                                                                      │                                  │
│ │  │ Arguments:                                                           │                                  │
│ │  │   Result 0                                                           │                                  │
│ │  │ Address: Input  0                                                    │                                  │
│ │  └                                                                      │                                  │
│ ╰─────────────────────────────────────────────────────────────────────────╯                                  │
│                                                                                                              │
│ Signatures:                                                                                                  │
│    hh7Shk0IJPgF735tJhix28AIUq29aB6ggj4obHt5capAVXBKNCusHeGjnS48QaEyAQir1JBfSqfYtks6i3BsCA==                  │
│                                                                                                              │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Transaction Effects                                                                               │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Digest: GqP5JB3sutDegXbvk6xGBwPNCJtjEjV9uSbWMaffV4Kb                                              │
│ Status: Success                                                                                   │
│ Executed Epoch: 789                                                                               │
│                                                                                                   │
│ Created Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c                         │
│  │ Owner: Shared( 349179971 )                                                                     │
│  │ Version: 349179971                                                                             │
│  │ Digest: FM2jU991AnsRdvKL9zCn9qSEeiQnhUJ6aez8jxcYFh6y                                           │
│  └──                                                                                              │
│  ┌──                                                                                              │
│  │ ID: 0x4fd4dac2b56e152e07f436a9f6dd8839aef9f64cd7724018c6f3626f98dbae29                         │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )  │
│  │ Version: 349179971                                                                             │
│  │ Digest: 3j6qo3c9MiKpXfepJednyU7akBFe59m14h3vsRg8ZjKc                                           │
│  └──                                                                                              │
│  ┌──                                                                                              │
│  │ ID: 0x5f03fd186965218f47b7aab4677c800e45830f5fc8c5cc70d24cc9cf664e9087                         │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )  │
│  │ Version: 349179971                                                                             │
│  │ Digest: 79vpPQTFHqSkuK2RzxDEG7256fugSVx59WeJsMM6JGiM                                           │
│  └──                                                                                              │
│  ┌──                                                                                              │
│  │ ID: 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e                         │
│  │ Owner: Immutable                                                                               │
│  │ Version: 1                                                                                     │
│  │ Digest: 3Tjv4vNXwFTyUaL2c3RbiLrkoH6UCYkhhBhLQesEPYV8                                           │
│  └──                                                                                              │
│ Mutated Objects:                                                                                  │
│  ┌──                                                                                              │
│  │ ID: 0x75a6246c1abd51d4f719664deeb534cfafd0a9d5c3ed0be7fba01a3a06ff0627                         │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )  │
│  │ Version: 349179971                                                                             │
│  │ Digest: HgeSjMqQEtgJJimnML8KXHLqnE13crVgZnBqbpEcJoMy                                           │
│  └──                                                                                              │
│ Gas Object:                                                                                       │
│  ┌──                                                                                              │
│  │ ID: 0x75a6246c1abd51d4f719664deeb534cfafd0a9d5c3ed0be7fba01a3a06ff0627                         │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )  │
│  │ Version: 349179971                                                                             │
│  │ Digest: HgeSjMqQEtgJJimnML8KXHLqnE13crVgZnBqbpEcJoMy                                           │
│  └──                                                                                              │
│ Gas Cost Summary:                                                                                 │
│    Storage Cost: 53382400 MIST                                                                    │
│    Computation Cost: 1000000 MIST                                                                 │
│    Storage Rebate: 978120 MIST                                                                    │
│    Non-refundable Storage Fee: 9880 MIST                                                          │
│                                                                                                   │
│ Transaction Dependencies:                                                                         │
│    2PbxAcCo4PRXLF4LEeCXMjRQQ4zC2pRqL5QfbFViuGiT                                                   │
│    2uvg3HheUT45CWZRSRfdcHxA6ewqeWpxCVPZUdJLuD66                                                   │
│    6pZ2bpkwLwnCH4qdHS1NcJypXLFUNvSHRKfKXhZvXQuo                                                   │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─────────────────────────────╮
│ No transaction block events │
╰─────────────────────────────╯

╭────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Object Changes                                                                                     │
├────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Created Objects:                                                                                   │
│  ┌──                                                                                               │
│  │ ObjectID: 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Shared( 349179971 )                                                                      │
│  │ ObjectType: 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e::rwa::RwaConfig  │
│  │ Version: 349179971                                                                              │
│  │ Digest: FM2jU991AnsRdvKL9zCn9qSEeiQnhUJ6aez8jxcYFh6y                                            │
│  └──                                                                                               │
│  ┌──                                                                                               │
│  │ ObjectID: 0x4fd4dac2b56e152e07f436a9f6dd8839aef9f64cd7724018c6f3626f98dbae29                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::package::Publisher                                                             │
╭────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Object Changes                                                                                     │
├────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Created Objects:                                                                                   │
│  ┌──                                                                                               │
│  │ ObjectID: 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Shared( 349179971 )                                                                      │
│  │ ObjectType: 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e::rwa::RwaConfig  │
│  │ Version: 349179971                                                                              │
│  │ Digest: FM2jU991AnsRdvKL9zCn9qSEeiQnhUJ6aez8jxcYFh6y                                            │
│  └──                                                                                               │
│  ┌──                                                                                               │
│  │ ObjectID: 0x4fd4dac2b56e152e07f436a9f6dd8839aef9f64cd7724018c6f3626f98dbae29                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::package::Publisher                                                             │
│ Object Changes                                                                                     │
├────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ Created Objects:                                                                                   │
│  ┌──                                                                                               │
│  │ ObjectID: 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Shared( 349179971 )                                                                      │
│  │ ObjectType: 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e::rwa::RwaConfig  │
│  │ Version: 349179971                                                                              │
│  │ Digest: FM2jU991AnsRdvKL9zCn9qSEeiQnhUJ6aez8jxcYFh6y                                            │
│  └──                                                                                               │
│  ┌──                                                                                               │
│  │ ObjectID: 0x4fd4dac2b56e152e07f436a9f6dd8839aef9f64cd7724018c6f3626f98dbae29                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::package::Publisher                                                             │
│  ┌──                                                                                               │
│  │ ObjectID: 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Shared( 349179971 )                                                                      │
│  │ ObjectType: 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e::rwa::RwaConfig  │
│  │ Version: 349179971                                                                              │
│  │ Digest: FM2jU991AnsRdvKL9zCn9qSEeiQnhUJ6aez8jxcYFh6y                                            │
│  └──                                                                                               │
│  ┌──                                                                                               │
│  │ ObjectID: 0x4fd4dac2b56e152e07f436a9f6dd8839aef9f64cd7724018c6f3626f98dbae29                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::package::Publisher                                                             │
│  │ Version: 349179971                                                                              │
│  │ Digest: FM2jU991AnsRdvKL9zCn9qSEeiQnhUJ6aez8jxcYFh6y                                            │
│  └──                                                                                               │
│  ┌──                                                                                               │
│  │ ObjectID: 0x4fd4dac2b56e152e07f436a9f6dd8839aef9f64cd7724018c6f3626f98dbae29                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::package::Publisher                                                             │
│  ┌──                                                                                               │
│  │ ObjectID: 0x4fd4dac2b56e152e07f436a9f6dd8839aef9f64cd7724018c6f3626f98dbae29                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::package::Publisher                                                             │
│  │ ObjectID: 0x4fd4dac2b56e152e07f436a9f6dd8839aef9f64cd7724018c6f3626f98dbae29                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::package::Publisher                                                             │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::package::Publisher                                                             │
│  │ Version: 349179971                                                                              │
│  │ ObjectType: 0x2::package::Publisher                                                             │
│  │ Version: 349179971                                                                              │
│  │ Version: 349179971                                                                              │
│  │ Digest: 3j6qo3c9MiKpXfepJednyU7akBFe59m14h3vsRg8ZjKc                                            │
│  │ Digest: 3j6qo3c9MiKpXfepJednyU7akBFe59m14h3vsRg8ZjKc                                            │
│  └──                                                                                               │
│  ┌──                                                                                               │
│  │ ObjectID: 0x5f03fd186965218f47b7aab4677c800e45830f5fc8c5cc70d24cc9cf664e9087                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::package::UpgradeCap                                                            │
│  │ Version: 349179971                                                                              │
│  │ Digest: 79vpPQTFHqSkuK2RzxDEG7256fugSVx59WeJsMM6JGiM                                            │
│  └──                                                                                               │
│ Mutated Objects:                                                                                   │
│  ┌──                                                                                               │
│  │ ObjectID: 0x75a6246c1abd51d4f719664deeb534cfafd0a9d5c3ed0be7fba01a3a06ff0627                    │
│  │ Sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e                      │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )   │
│  │ ObjectType: 0x2::coin::Coin<0x2::sui::SUI>                                                      │
│  │ Version: 349179971                                                                              │
│  │ Digest: HgeSjMqQEtgJJimnML8KXHLqnE13crVgZnBqbpEcJoMy                                            │
│  └──                                                                                               │
│ Published Objects:                                                                                 │
│  ┌──                                                                                               │
│  │ PackageID: 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e                   │
│  │ Version: 1                                                                                      │
│  │ Digest: 3Tjv4vNXwFTyUaL2c3RbiLrkoH6UCYkhhBhLQesEPYV8                                            │
│  │ Modules: ratio, rwa, utils                                                                      │
│  └──                                                                                               │
╰────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Balance Changes                                                                                   │
├───────────────────────────────────────────────────────────────────────────────────────────────────┤
│  ┌──                                                                                              │
│  │ Owner: Account Address ( 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e )  │
│  │ CoinType: 0x2::sui::SUI                                                                        │
│  │ Amount: -53404280                                                                              │
│  └──                                                                                              │
╰───────────────────────────────────────────────────────────────────────────────────────────────────╯
```

## 2. 发布RWA项目

- 1. 添加发行项目的白名单账户

sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e
packageId: 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e
rwaConfigId: 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c
白名单账户：0xbb0015a63dd23a3b4f9de7e350baa6124330c8a214ad7932e29d88379b618bc7

```
sui client call \
  --package 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e \
  --module rwa \
  --function add_rwa_whitelist \
  --args 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c 0xbb0015a63dd23a3b4f9de7e350baa6124330c8a214ad7932e29d88379b618bc7

hash: 24fHpsoGpQaaaDZQpTaDdUSBrB3xTCVttHLq9kaMTSpu
```

- 2. 发布RWA项目

sender: 0xbb0015a63dd23a3b4f9de7e350baa6124330c8a214ad7932e29d88379b618bc7
packageId: 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e
X: 0x5e02c8f39dd76b2e7b2460ec7798efaf7cfd341bf2c449ded5b0c4c502c916ac::usdx::USDX
Y: 0xa616fd2c480059496ec8446487f87049ccef91522d6982fcd4c9c6e4c73e9d0e::usdt::USDT
rwaConfigId: 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c
project_key: USDX-USDT
price: 10000
x_tokens: [0x41a1c03158bad2b1ade6af4e1e4fe0fa970b2295fb7bf370b34fbd9567f84fc9]

```

sui client call \
  --package 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e \
  --module rwa \
  --function publish_rwa_project \
  --type-args 0x5e02c8f39dd76b2e7b2460ec7798efaf7cfd341bf2c449ded5b0c4c502c916ac::usdx::USDX  0xa616fd2c480059496ec8446487f87049ccef91522d6982fcd4c9c6e4c73e9d0e::usdt::USDT \
  --args 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c USDX-USDT 10000 [0x41a1c03158bad2b1ade6af4e1e4fe0fa970b2295fb7bf370b34fbd9567f84fc9]

hash: 2ZGGWRGadEzBHayPRkkJhusvp7mbuPefzNpBsvmWH9yn
```

- 3. 购买X TOKEN

sender: 0xc0b2d8d6c26ec062868b266217a7aa4559d425d3440d53ea6070176a9d552e8e
packageId: 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e
X: 0x5e02c8f39dd76b2e7b2460ec7798efaf7cfd341bf2c449ded5b0c4c502c916ac::usdx::USDX
Y: 0xa616fd2c480059496ec8446487f87049ccef91522d6982fcd4c9c6e4c73e9d0e::usdt::USDT
rwaConfigId: 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c
project_key: USDX-USDT

```

sui client call \
  --package 0x7c397d10e22b973fe3fea8d20286c675e4abadd80ce9a7483fe78934ac05a81e \
  --module rwa \
  --function buy_rwa_project_token \
  --type-args 0x5e02c8f39dd76b2e7b2460ec7798efaf7cfd341bf2c449ded5b0c4c502c916ac::usdx::USDX  0xa616fd2c480059496ec8446487f87049ccef91522d6982fcd4c9c6e4c73e9d0e::usdt::USDT \
  --args  --args 0x0c5e694b8a1411e49645261fa0b78e03f59b62ec12db267570e66fec8293773c USDX-USDT [0xd7443df45a50c9917dac5561f049290b7764747605579e1391356684e7eb4a67,0xf1ea292e2ee569b62b0a9f00b14a41f47fdef3296329507c7bcf068e298e57b2] 200

hash: E7jHX7ZLiFtwJ1vYGgmmGCc84A96be2ofhVWVoWHBJXk
```

